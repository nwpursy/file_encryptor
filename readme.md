```markdown
# 文件加密工具 (V6 - 专业版) - 用户使用手册

欢迎使用本文件加密工具！这是一个强大而简单的命令行程序，旨在帮助您安全地加密任何文件，并确保只有指定的接收方才能解密。

本手册将引导您完成从配置到使用的每一步，即使您是新手用户，也能在5分钟内快速上手。

---

### ✅ 核心功能

*   **高级混合加密**: 结合了RSA和AES加密的优点，既安全又高效，没有文件大小限制。
*   **支持任意文件类型**: 无论是 Word, Excel, PDF, 还是大型的 `.zip` / `.rar` 压缩包，都可以完美处理。
*   **唯一身份标识**: 每次加密都会生成带有时间戳的唯一文件名，彻底告别文件和密钥混淆的烦恼。
*   **配置文件驱动**: 只需一次配置，后续操作极其简单。
*   **智能密钥推断**: 解密时，程序能根据加密文件名自动找到对应的私钥，最大程度简化操作。
*   **跨磁盘安全**: 无论您的文件和程序存放在哪个磁盘，都能稳定运行。
*   **详细过程反馈**: 清晰地打印每一步操作，让您对整个过程了如指掌。

---

### ⚙️ 首次使用：准备工作

在开始之前，请确保您已经准备好了以下两样东西：

1.  **主程序**: `FileEncryptor.exe`
2.  **配置文件**: `config.ini`

请将这两个文件放在同一个文件夹中，例如 `D:\MyEncryptor\`。这会是您的“工作目录”。

```
D:\MyEncryptor\
├── FileEncryptor.exe   <-- 您的主程序
└── config.ini          <-- 您的配置文件
```

---

### 🚀 快速上手：两步学会使用

#### 第一步：修改配置文件 `config.ini`

用任何文本编辑器（如记事本）打开 `config.ini` 文件。这是一个示例配置，请根据您的实际需求修改路径：

> **提示**: 路径可以使用正斜杠 `/` 或双反斜杠 `\\`。例如 `D:/output` 或 `D:\\output`。

```ini
# 文件混合加密工具配置文件 (V4+)
# =================================

[Encrypt]
# 【加密配置】
# 在这里填入您想要加密的那个原始文件的【完整路径】
source_file_path = D:/MyDocuments/年度报告.docx

# 加密后生成的.bin文件将要存放在哪个【目录】
encrypted_output_dir = D:/Output/Encrypted

[Decrypt]
# 【解密配置】
# 您收到的.bin加密文件都存放在哪个【目录】
encrypted_source_dir = D:/Output/Encrypted

# 解密成功后的文件，要恢复到哪个【目录】
decrypted_output_dir = D:/Output/Restored

[Keys]
# 【密钥配置】
# 所有生成的密钥文件 (.pem)，统一存放在哪个【目录】
storage_dir = D:/Output/Keys
```

**配置完成后，保存并关闭文件。**

#### 第二步：打开命令行并运行命令

1.  进入您的“工作目录”（例如 `D:\MyEncryptor\`）。
2.  在该文件夹的地址栏输入 `cmd` 并按回车，即可快速打开命令行窗口。

现在，您可以执行加密或解密操作了。

---

### 🔒 **如何加密文件**

1.  **确认配置**: 确保 `config.ini` 文件中的 `[Encrypt]` 部分已指向您想加密的源文件。
2.  **运行命令**: 在命令行窗口中，输入以下命令并回车：

    ```bash
    FileEncryptor.exe encrypt
    ```

3.  **查看结果**: 程序会打印详细的加密过程，并最终显示成功信息，告诉您生成的三个文件的存放位置。

    ```
    --- [SUCCESS] 加密任务完成 ---
      加密文件: D:\Output\Encrypted\年度报告_20250721-140000.bin
      公钥文件: D:\Output\Keys\年度报告_20250721-140000_public.pem
      私钥文件: D:\Output\Keys\年度报告_20250721-140000_private.pem  (请务必妥善保管并发送给解密方!)
    --------------------------------
    ```

4.  **发送文件**: 现在，您需要将以下 **两个** 文件通过安全的方式发送给您的解密方：
    *   **加密文件** (`.bin`)
    *   **私钥文件** (`_private.pem`)

---

### 🔑 **如何解密文件**

1.  **准备文件**: 确保您已经收到了对方传来的加密文件 (`.bin`) 和对应的私钥文件 (`_private.pem`)。并将它们分别放到 `config.ini` 中 `encrypted_source_dir` 和 `storage_dir` 所指定的目录里。
2.  **运行命令**: 在命令行窗口中，使用 `-f` 参数指定您要解密的那个 `.bin` 文件的 **文件名**：

    ```bash
    FileEncryptor.exe decrypt -f "年度报告_20250721-140000.bin"
    ```

3.  **查看结果**: 程序会自动根据文件名推断出私钥的位置，并执行解密。成功后会显示：

    ```
    --- [SUCCESS] 解密任务完成 ---
      文件已成功恢复至: D:\Output\Restored\decrypted_年度报告.docx
    --------------------------------
    ```

您现在可以去 `decrypted_output_dir` 指定的目录中找到已经恢复的原始文件了！

---

### ⚠️ **安全黄金法则：私钥！私钥！私钥！**

*   **私钥 (`_private.pem`) 是解开文件的唯一钥匙。** 绝对不能泄露给除指定接收方以外的任何人。
*   **公钥 (`_public.pem`) 只是用来加密的“锁”。** 它无法解密任何东西，可以看作是公开的。
*   **永远不要** 通过不安全的渠道（如普通电子邮件）发送私钥。建议使用加密聊天软件或U盘当面交付。

---

### ❓ 常见问题 (FAQ)

*   **Q: 我可以加密一个 2GB 的压缩包吗？**
    *   **A:** 可以。本工具没有文件大小限制，并且支持任何文件类型。

*   **Q: 提示 "文件不存在" 怎么办？**
    *   **A:** 请仔细检查 `config.ini` 中的路径是否正确，或者您在命令行中输入的文件名是否有拼写错误。

*   **Q: 提示 "私钥文件不存在" 怎么办？**
    *   **A:** 请确保您收到的私钥文件 (`_private.pem`) 已经放到了 `config.ini` 中 `[Keys]` 部分 `storage_dir` 所指定的目录里。

*   **Q: 我必须使用 `config.ini` 吗？**
    *   **A:** 不是。所有配置都可以通过命令行参数临时指定，例如 `FileEncryptor.exe encrypt -i "C:/myfile.txt" -o "C:/out"`。这适合高级用户进行灵活操作。

```